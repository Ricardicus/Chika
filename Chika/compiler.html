<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Chika compiler</title>
    <script src="compile.js"></script> 
    <script>
const e  = (el) => document.querySelector(el);
const es = (el) => document.querySelectorAll(el);

function DOM_compile () {
  const compiled = compile(e("textarea").value);
  const imageHex = compiled.image;
  e("#assembly").value = compiled.assembly;
  e("#image").value = imageHex + "\n\n\n0x" + imageHex.match(/.{2}/g).join(", 0x");
  e("size").innerHTML = (imageHex.length / 2) + "B";
}
    </script>
    <style>
textarea {
  width: 14rem;
  height: 20rem;
}
.wide {
  width: 20rem;
}
    </style>
  </head>
  <body>
    <div>
      <textarea class="wide">(fn abs n
  (if (< n 0) (* n -1I) n))

(print "(abs -123I) = " (abs -123I)
       ", (abs 123I)  = " (abs 123I))</textarea>
      <textarea id="assembly"></textarea>
      <textarea id="image"></textarea>
    </div>
    <div>
      <button onclick="DOM_compile()">Compile</button>
      <size>0B<size></size>
    </div>
  </body>
</html>
