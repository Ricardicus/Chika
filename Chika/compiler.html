<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Chika compiler</title>
    <script src="compile.js"></script> 
    <script>
const e  = (el) => document.querySelector(el);
const es = (el) => document.querySelectorAll(el);

function DOM_compile () {
  const ramRequest = e("#ramRequest").value;
  const compiled = compile(e("textarea").value, ramRequest);
  const imageHex = compiled.image;
  e("#assembly").value = compiled.assembly;
  e("#image").value = imageHex + "\n\n\n0x" + imageHex.match(/.{2}/g).join(", 0x");
  e("size").innerHTML = (imageHex.length / 2) + "B";
}
    </script>
    <style>
* {
  background-color: #000;
  color: #fff;
}
textarea {
  width: 14rem;
  height: 20rem;
}
.wide {
  width: 20rem;
}
    </style>
  </head>
  <body>
    <div>
<textarea class="wide">
(val 0)

(fn heartbeat state
  (print state)
  (+ state 1))
</textarea>
      <textarea id="assembly" readonly></textarea>
      <textarea id="image" readonly></textarea>
    </div>
    <div>
      <input type="number" id="ramRequest" value="8192">
      <button onclick="DOM_compile()">Compile</button>
      <size>0B<size></size>
    </div>
  </body>
</html>
